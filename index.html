<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>BBK Seite - Startseite</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="https://www.bbk.schule/typo3conf/ext/mj_bk/Resources/Public/Icons/favicon.ico">
</head>
<body>
<header>
    <h1>BBK Seite</h1>
</header>
<main>
    <h2>Erlöse dich von dem BBK</h2>
    <p>
        Wir wissen, wie es sich anfühlt, wenn die Minuten im <span class="text-bold">BBK</span> zu Stunden werden,
        die Stunden zu Tagen und die Tage zu einer schier endlosen Qual.
        Diese Seite ist dein persönliches Antidot gegen die
        Schul-Melancholie. Finde heraus, wie viele Sonnenaufgänge dir noch bleiben,
        bis das Leiden ein Ende hat und du die Tore dieser Bildungs-Anstalt für immer hinter dir
        lassen kannst. ODER: Wähle einfach deine aktuelle Hölle auf Erden (Stunde) und sieh auf die
        Sekunde genau, wann der Albtraum vorbei ist!
    </p>
    <br>
    <a href="./countdown/">
        <button class="link-btn">Countdown Seite</button>
    </a>
    <div id="next-lesson-end" style="margin-top:2em; font-size:1.3em;"></div>
    <script>
    // Stundenzeiten: [Start, Ende]
    const stunden = [
        ["07:55", "08:40"],
        ["08:40", "09:25"],
        ["09:40", "10:25"],
        ["10:25", "11:10"],
        ["11:25", "12:10"],
        ["12:10", "12:55"],
        ["13:10", "13:55"],
        ["13:55", "14:40"]
    ];
    function timeToMinutes(str) {
        const [h, m] = str.split(":").map(Number);
        return h * 60 + m;
    }
    function getCurrentStundeIndex() {
        const now = new Date();
        const nowMin = now.getHours() * 60 + now.getMinutes();
        for (let i = 0; i < stunden.length; i++) {
            const start = timeToMinutes(stunden[i][0]);
            const end = timeToMinutes(stunden[i][1]);
            if (nowMin >= start && nowMin < end) {
                return i;
            }
        }
        return -1;
    }
    function updateNextLessonEnd() {
        const idx = getCurrentStundeIndex();
        const div = document.getElementById('next-lesson-end');
        if (idx === -1) {
            div.textContent = "Gerade läuft keine Stunde.";
            return;
        }
        const now = new Date();
        const [h, m] = stunden[idx][1].split(":").map(Number);
        const end = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m, 0, 0);
        let diff = Math.floor((end - now) / 1000);
        if (diff <= 0) {
            div.textContent = `Die ${idx+1}. Stunde ist vorbei.`;
            return;
        }
        const min = Math.floor(diff / 60);
        const sec = diff % 60;
        div.textContent = `Ende der ${idx+1}. Stunde in ${min} Minuten ${sec} Sekunden`;
    }
    setInterval(updateNextLessonEnd, 1000);
    updateNextLessonEnd();
    </script>
</main>
</body>
</html>